"use client";
import React from "react";
import { Chart as ChartJS, ArcElement, Tooltip, Legend } from "chart.js";
import { Doughnut } from "react-chartjs-2";

ChartJS.register(ArcElement, Tooltip, Legend);

const data = {
  labels: ["Assessment Visibility", "No Assessment Visibility"],
  datasets: [
    {
      data: [21, 188],
      backgroundColor: ["#007bff", "#333"],
      hoverBackgroundColor: ["#0056b3", "#555"],
    },
  ],
};

const options = {
  maintainAspectRatio: false,
  responsive: true,
  plugins: {
    legend: {
      display: false,
    },
    tooltip: {
      callbacks: {
        label: function (tooltipItem) {
          return `${tooltipItem.label}: ${tooltipItem.raw} devices`;
        },
      },
    },
  },
};

const VulnerabilityChart: React.FC = () => {
  return (
    <div style={{ padding: '40px', minHeight: '100vh', backgroundColor: '#1a1a1a', color: '#ffffff', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
      <h2 style={{ fontSize: '18px', fontWeight: 'bold', marginBottom: '10px', textAlign: 'center' }}>VULNERABILITY ASSESSMENT COVERAGE (WINDOWS AND LINUX ENDPOINTS)</h2>
      <p style={{ fontSize: '14px', color: '#aaa', marginBottom: '20px', textAlign: 'center' }}>Last assessment: 2025-01-09</p>
      
      <div style={{ display: 'flex', alignItems: 'center', maxWidth: '1000px', backgroundColor: '#2c2c2c', padding: '20px', borderRadius: '8px', minHeight: '80vh'}}>
        <div style={{ flex: '1', paddingRight: '20px' }}>
          <h3 style={{ fontSize: '16px', fontWeight: 'bold' }}>Assessment visibility (21)</h3>
          <ul style={{ listStyle: 'none', padding: '0', fontSize: '14px' }}>
            <li>• Endpoint Sensor: 16 (7.7%)</li>
            <li>• Trend Cloud One - Endpoint & Workload Security: 6 (2.9%)</li>
            <li>• Standard Endpoint Protection: 7 (3.3%)</li>
            <li>• Server & Workload Protection: 3 (1.4%)</li>
            <li>• Third party device data: 0 (0%)</li>
          </ul>
          <h3 style={{ fontSize: '16px', fontWeight: 'bold' }}>No Assessment visibility (188)</h3>
        </div>
        
        <div style={{ width: '300px', height: '300px', position: 'relative', flex: '1', display: 'flex', justifyContent: 'center' }}>
          <Doughnut data={data} options={options} />
          <div style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', color: '#ffffff', textAlign: 'center' }}>
            <p style={{ fontSize: '24px', fontWeight: 'bold' }}>10%</p>
            <p style={{ fontSize: '12px', color: '#ffa500' }}>Low Coverage</p>
            <p style={{ fontSize: '12px', marginTop: '4px' }}>21 / 209</p>
          </div>
        </div>
        
        <div style={{ flex: '1', paddingLeft: '20px' }}>
          <h3 style={{ fontSize: '16px', fontWeight: 'bold' }}>Improve Coverage for Better Visibility</h3>
          <p style={{ fontSize: '12px', color: '#ccc', marginBottom: '20px' }}>Deploy Trend Micro agents to the other 188 endpoints to gain complete assessment visibility.</p>
          <div style={{ display: 'flex', gap: '10px' }}>
            <button style={{ padding: '10px 20px', backgroundColor: '#007bff', border: 'none', color: 'white', borderRadius: '5px', cursor: 'pointer' }}>Extend Assessment Scope</button>
            <button style={{ padding: '10px 20px', backgroundColor: '#444', border: 'none', color: 'white', borderRadius: '5px', cursor: 'pointer' }}>View Devices</button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default VulnerabilityChart;
